webpackJsonp([1],{"2bgv":function(e,t){},"3YjR":function(e,t){},"4llj":function(e,t){},GOQh:function(e,t){e.exports={indexes:{int:"interventions",pre:"predictions",geo:"geographies"}}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o=n("MdIv"),i={components:{LMap:o.LMap,LTileLayer:o.LTileLayer,LGeoJson:o.LGeoJson},data:function(){return{center:L.latLng(48.2603,2.0941),url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',options_bases:{style:function(){return{weight:1,color:"#FFFAFA",opacity:.9,dashArray:"2",fillColor:"#e4ce7f",fillOpacity:.5}}},options_casernes:{pointToLayer:function(e,t){var n=1;switch(e.properties.TYP_CS_COD){case"CSP":n=3;break;case"CS":n=2;break;case"CPI":n=1}var r=1+n/3,o=L.icon({iconUrl:"static/caserne.png",iconSize:[10*r,15*r],iconAnchor:[16,37],popupAnchor:[-15,-35]});return L.marker(t,{icon:o})},onEachFeature:function(e,t){t.bindPopup("<div>"+e.properties.NOM+" ("+e.properties.TYP_CS_COD+") </div> <i class='leaflet-title'> groupement "+e.properties.GROUPEMENT+" </i>")}},styleScaleType:"perClass_green2red",geojson_layer:void 0}},computed:{zoom:function(){return this.$store.state.carte.zoom},currentPosition:function(){return this.$store.state.slider.currentPosition},dataHasBeenUpdated:function(){return this.$store.state.dataHasBeenUpdated},showCasernes:function(){return this.$store.state.filters.showCasernes},options:function(){var e=this.options_bases;return e.style=this.getStyle(this.styleScaleType),e.currentPosition=this.currentPosition,e.onEachFeature=this.onEachFeature,e},geojson_fromES:function(){try{var e=this.$store.state.data.geo.hits.hits,t={type:"FeatureCollection",features:[]};return e.map(function(e){t.features.push(e._source)}),t}catch(e){return console.log(" Carte.vue error",e.toString().slice(0,100)),{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[-.811195,47.063489],[-.803104,47.063683],[-.797096,47.067122]]]},properties:{code:"49195"}}]}}},geojson_forCasernes:function(){try{var e=this.$store.state.data.cas.hits.hits,t={type:"FeatureCollection",features:[]};return e.map(function(e){t.features.push(e._source)}),t}catch(e){return console.log(" Carte.vue error",e.toString().slice(0,100)),{type:"FeatureCollection",features:[]}}},predictions:function(){try{return this.$store.state.data.pre.hits.hits.map(function(e){return e._source})}catch(e){return console.log(" Carte.vue error",e.toString().slice(0,100)),{}}},geojson:function(){var e=this,t=this.geojson_fromES;t.features.map(function(t){try{t.properties.prediction=e.predictions.find(function(e){return e.geo_id===t.properties.code}),t.properties.currentPosition=e.currentPosition}catch(e){console.log("ca marche pas ouf CARTE.VUE -> this.predictions.find( prediction => prediction.geo_id ===  feature.properties.code)",e.toString().slice(0,100))}});return t}},methods:{onEachFeature:function(e,t){if(e.properties&&e.properties.nom){var n=(screen.width||500)<700?15:50,r=e.properties.nom.length>n?"...":"",o="non disponible",i="non disponible",s="non disponible",a="#d6d6d6";try{var c=e.properties.prediction,u=this.formatCurrentPosition(e.properties.currentPosition);o=c["pre_"+u]||o,i=c["cla_"+u]||i,s=c["po_"+u]||s,a=this.green2red(i),console.log("classeInter,colorClasse",i,a)}catch(t){console.log(t.toString(),"\r\r    \r",e.properties.nom)}t.bindPopup("<div class='flexCombo firstDivRow'><div class='flexCombo secondDivCol'> <span class='predictions flexCombo' style='border-color:"+a+"'> <span class='number'>"+o+"</span> </span> <span class='smaller'>interventions predites</span> <span style='color:"+a+"'> (classe: "+this.int2classe(i)+") </span> </div><div class='flexCombo secondDivCol'> <span class='smaller'>Reference pour cette periode: </span> <span>"+s+"</span> </div><i class='leaflet-title'>"+e.properties.nom.slice(0,n)+r+"</i> </div>")}},refreshGeoJson:function(){var e=this.$refs.map.mapObject;void 0===this.geojson_layer?(e.removeLayer(this.$refs.firstLoadgeojson.mapObject),this.geojson_layer=L.geoJSON(this.geojson,this.options).addTo(e)):(e.removeLayer(this.geojson_layer),this.geojson_layer=L.geoJSON(this.geojson,this.options).addTo(e))},getStyle:function(e){var t=this,n=void 0;switch(e){case"perClass_green2red":var r="#e4ce7f";return function(e){try{var n=e.properties.currentPosition,o=e.properties.prediction;r=t.green2red(o["cla_"+t.formatCurrentPosition(n)])}catch(e){console.log("feature not ready OR bug")}return{weight:1,color:"#FFFAFA",opacity:.9,dashArray:"2",fillColor:r,fillOpacity:.5}};default:n=this.options_bases.style}return n},formatCurrentPosition:function(e){return("000"+e).slice(-3)},green2red:function(e){var t=void 0;switch(e){case 1:t="#7fe4a1";break;case 2:t="#02b93f";break;case 3:t="#ffffff";break;case 4:t="#f58888";break;case 5:t="#ff1818";break;default:t="#7fe4a1"}return t},int2classe:function(e){var t=void 0;switch(e){case 1:t="tres faible";break;case 2:t="faible";break;case 3:t="moyenne";break;case 4:t="forte";break;case 5:t="tres forte";break;default:t="moyenne"}return t}},watch:{currentPosition:function(){this.refreshGeoJson()},dataHasBeenUpdated:function(){this.refreshGeoJson()}},mounted:function(){this.$store.dispatch("filters_updateGeoAggregation",this.$store.state.filters.currentGeoAggregation)}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-popup",staticStyle:{height:"100%",width:"100%"}},[n("l-map",{ref:"map",staticStyle:{height:"100%"},attrs:{zoom:e.zoom,center:e.center}},[n("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._v(" "),n("l-geo-json",{ref:"firstLoadgeojson",attrs:{geojson:e.geojson,options:e.options}}),e._v(" "),n("l-geo-json",{ref:"loadCasernesgeojson",attrs:{geojson:e.geojson_forCasernes,options:e.options_casernes,visible:e.showCasernes}})],1)],1)},staticRenderFns:[]};var a=n("VU/8")(i,s,!1,function(e){n("RmuI"),n("hP9e")},"data-v-61e21945",null).exports,c=n("pW2n"),u=n.n(c),l=new r.a,d={data:function(){return{selectedOption:{name:""},showMenu:!1,placeholderText:"Please select an item"}},props:{options:{type:[Array,Object]},selected:{},placeholder:[String],iconName:String},mounted:function(){var e=this;this.selectedOption=this.selected,this.placeholder&&(this.placeholderText=this.placeholder),l.$on("i-got-clicked",function(){e.showMenu=!1})},methods:{updateOption:function(e){this.selectedOption=e,this.showMenu=!1,this.$emit("updateOption",this.selectedOption)},toggleMenu:function(){!1===this.showMenu&&l.$emit("i-got-clicked","if you listen to this, please close yourself"),this.showMenu=!this.showMenu}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-group"},[void 0!==e.selectedOption.name?n("li",{staticClass:"dropdown-toggle",on:{click:function(t){e.toggleMenu()}}},[n("font-awesome-icon",{attrs:{icon:this.iconName}}),e._v(" "+e._s(e.selectedOption.name)+"\n    "),n("span",{staticClass:"caret"})],1):e._e(),e._v(" "),void 0===e.selectedOption.name?n("li",{staticClass:"dropdown-toggle",on:{click:function(t){e.toggleMenu()}}},[n("font-awesome-icon",{attrs:{icon:this.iconName}}),e._v(" "+e._s(e.placeholderText)+"\n    "),n("span",{staticClass:"caret"})],1):e._e(),e._v(" "),e.showMenu?n("ul",{staticClass:"dropdown-menu closeDropdownIfOpen"},e._l(e.options,function(t){return n("li",[t.available?e._e():n("a",{staticClass:"disabled"},[e._v("\n                    "+e._s(t.name)+"\n                ")]),e._v(" "),t.available?n("a",{on:{click:function(n){e.updateOption(t)}}},[e._v("\n                    "+e._s(t.name)+"\n                ")]):e._e()])})):e._e()])},staticRenderFns:[]};var g=n("VU/8")(d,p,!1,function(e){n("jVs4")},"data-v-98c5d22c",null).exports,f={components:{dropdown:g},data:function(){return{iconName:"truck"}},computed:{categorInter:function(){return this.$store.state.configuration.categorInters},firstSelected:function(){var e=this;return this.$store.state.configuration.categorInters.find(function(t){return t.nameCode===e.$store.state.filters.currentCategorInter})}},methods:{filters_updateCategory:function(e){this.$store.dispatch("filters_updateCategory",e.nameCode),console.log("action a produire lorsque on selectionne une categorie d intervention de dropdown",e)}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"filterCategorInter"}},[t("dropdown",{attrs:{options:this.categorInter,selected:this.firstSelected,iconName:this.iconName},on:{updateOption:this.filters_updateCategory}})],1)},staticRenderFns:[]};var m={components:{dropdown:g},data:function(){return{iconName:"calendar-alt"}},computed:{timeAggregation:function(){return this.$store.state.configuration.timeAggregations},firstSelected:function(){var e=this;return this.$store.state.configuration.timeAggregations.find(function(t){return t.nameCode===e.$store.state.filters.currentTimeAggregation})}},methods:{filters_updateTimeAggregation:function(e){this.$store.dispatch("filters_updateTimeAggregation",e.nameCode),console.log("action a produire si selection de ",e)}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"FilterTimeAggregation"}},[t("dropdown",{attrs:{options:this.timeAggregation,selected:this.firstSelected,iconName:this.iconName},on:{updateOption:this.filters_updateTimeAggregation}})],1)},staticRenderFns:[]};var j={components:{dropdown:g},data:function(){return{iconName:"map-signs"}},computed:{geoAggregation:function(){return this.$store.state.configuration.geoAggregations},firstSelected:function(){var e=this;return this.$store.state.configuration.geoAggregations.find(function(t){return t.nameCode===e.$store.state.filters.currentGeoAggregation})}},methods:{filters_updateGeoAggregation:function(e){this.$store.dispatch("filters_updateGeoAggregation",e.nameCode),console.log("action a produire lorsque on selectionne une geo aggregation de dropdown",e)}}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"FilterGeoAggregation"}},[t("dropdown",{attrs:{options:this.geoAggregation,selected:this.firstSelected,iconName:this.iconName},on:{updateOption:this.filters_updateGeoAggregation}})],1)},staticRenderFns:[]};var b={components:{FilterCategorInter:n("VU/8")(f,h,!1,function(e){n("VglX")},"data-v-93db9622",null).exports,FilterTimeAggregation:n("VU/8")(m,v,!1,function(e){n("rBQb")},"data-v-4122319a",null).exports,FilterGeoAggregation:n("VU/8")(j,y,!1,function(e){n("2bgv")},"data-v-02ed8b86",null).exports},data:function(){return{version:u.a.version}},computed:{hideAllFilters:function(){return this.$store.state.filters.hideAllFilters}}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:!this.hideAllFilters,expression:"!hideAllFilters"}],attrs:{id:"filters"}},[t("FilterCategorInter"),this._v(" "),t("FilterTimeAggregation"),this._v(" "),t("FilterGeoAggregation")],1)},staticRenderFns:[]};var C=n("VU/8")(b,_,!1,function(e){n("Z9cN")},"data-v-2ef48a5e",null).exports,w=n("zF5W"),A=n.n(w),F=(n("4llj"),{data:function(){return{currentTimeAggregationData:1}},computed:{currentTimeAggregation:function(){return this.$store.state.filters.currentTimeAggregation},currentPosition:function(){return this.$store.state.slider.currentPosition},sliderRangeBegin:function(){return 1},sliderRangeEnd:function(){return this.timeAggregationConfiguration.timeRepetition},beginDate:function(){return this.$store.state.slider.begin},timeAggregationConfiguration:function(){return this.$store.getters.slider_timeAggregationConfiguration(this.currentTimeAggregation)}},methods:{formatTooltip:function(e){var t=void 0,n=void 0,r=this.timeAggregationConfiguration.timeStepBetweenRepetitions,o=this.$moment(new Date(this.beginDate)).add(e*r.step,r.type).valueOf();switch(this.timeAggregationConfiguration.nameCode){case"j":t={weekday:"long",year:"numeric",month:"long",day:"numeric"},n=new Date(o).toLocaleDateString("fr-FR",t);break;case"s":t={weekday:"short",month:"long",day:"numeric",year:"numeric"},n="semaine debutant le "+new Date(o).toLocaleDateString("fr-FR",t);break;case"m":t={year:"numeric",month:"long"},n=new Date(o).toLocaleDateString("fr-FR",t);break;case"t":t={month:"long",year:"numeric"},n="trimestre debutant en "+new Date(o).toLocaleDateString("fr-FR",t);break;case"a":t={year:"numeric"},n=new Date(o).toLocaleDateString("fr-FR",t);break;default:t={weekday:"long",year:"numeric",month:"long",day:"numeric"},n=new Date(o).toLocaleDateString("fr-FR",t)}return n},updateSlider:function(){this.$refs.slider.noUiSlider.updateOptions({range:{min:this.sliderRangeBegin,max:this.sliderRangeEnd},step:1,start:1})}},watch:{currentTimeAggregation:function(){this.updateSlider()}},mounted:function(){var e=this,t=this;this.$store.dispatch("filters_updateTimeAggregation",this.$store.state.filters.currentTimeAggregation).then(function(){A.a.create(e.$refs.slider,{start:e.sliderRangeBegin,behaviour:"tap-drag",connect:!0,range:{min:e.sliderRangeBegin,max:e.sliderRangeEnd},step:1,tooltips:[{to:e.formatTooltip}],animate:!0}).on("update",function(e){t.$store.commit("slider_updateCurrentPosition",parseInt(e[0]))})})}}),k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sliders"},[t("span",[t("div",{ref:"slider",staticClass:"slider"})])])},staticRenderFns:[]};var S=n("VU/8")(F,k,!1,function(e){n("aFj1")},null,null).exports,x={props:{iconName:String}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn-group"},[t("li",{staticClass:"dropdown-toggle"},[t("font-awesome-icon",{attrs:{icon:this.iconName}})],1)])},staticRenderFns:[]};var R=n("VU/8")(x,E,!1,function(e){n("e8iV")},"data-v-02c2c223",null).exports,D=n("sTcZ"),$=n.n(D),z={components:{buttonprint:R},data:function(){return{iconName:"print",show:!0}},methods:{clickEvent:function(){this.show=!1;var e=this;$.a.toJpeg(this.$parent.$refs.refForScreenshot,{quality:.99}).then(function(t){var n=document.createElement("a");n.download="previsecours.jpeg",n.href=t,n.click(),e.show=!0}).catch(function(e){console.error("oops, screenshot went wrong!",e)})}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"slide-fade"}},[this.show?t("div",{attrs:{id:"ButtonPrint"},on:{click:this.clickEvent}},[t("buttonprint",{attrs:{iconName:this.iconName}})],1):this._e()])},staticRenderFns:[]};var T=n("VU/8")(z,P,!1,function(e){n("W3x2")},"data-v-afe6200c",null).exports,N=n("//Fk"),O=n.n(N),B=n("bOdI"),I=n.n(B),U=n("/8Lx"),q=n.n(U),G=n("GOQh"),V=n.n(G),M={search:X,searchSimpleFilter:function(e,t,n){var r=function(e,t){return{size:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,query:{match:I()({},e,t)}}}(t,n);return X(e,r)},function_createQuery:function(e,t){var n=void 0;switch(t){case"int":n=K(e);break;case"pre":n=function(e){var t=e.filters.currentDepartment,n=e.filters.currentCategorInter,r=e.filters.currentTimeAggregation,o=e.filters.currentGeoAggregation,i="function_createQueryPre - sdis"+t.toString()+"_"+o+"_"+n+"_"+r;return console.log(i),{query:{match:{prediction_type:i}},size:1e3}}(e);break;case"geo":n=function(e){var t=e.filters.currentDepartment,n=e.filters.currentGeoAggregation,r="function_createQueryGeo - sdis"+t.toString()+"_"+n;return console.log(r),{query:{match:{geotype:n}},size:1e3}}(e);break;default:n=K(e)}return n},function_createQueryLoadCasernes:function(e){return{query:{bool:{must:[{match:{geotype:"cas"}},{match:{"properties.codeDepartement":e}}]}},size:1e3}},function_createQueryPreForExport:function(e){return{query:{regexp:{prediction_type:"sdis"+e+".*"}},size:1e4}},function_createQueryGeoForExport:function(e){return{query:{regexp:{"properties.codeDepartement":e}},size:1e4}}},H=window.location.protocol,Q=window.location.host,J=H+"//"+Q+"/api/";console.log("url for elasticsearch config",J);var W=new q.a.Client({host:J,apiVersion:"5.6"});function X(e,t){return V.a.indexes[e]?W.search({index:V.a.indexes[e],body:t}):(console.log("indexes[indexType] problem in SEARCH: ",V.a.indexes[e]),!1)}function K(e){var t=e.filters.currentDepartment,n=e.filters.currentCategorInter,r=e.filters.currentTimeAggregation,o=e.filters.currentGeoAggregation,i="function_createQueryInt - sdis"+t.toString()+"_"+o+"_"+n+"_"+r;return console.log(i),{query:{type:{value:i}},size:1e3}}var Z=n("pFYg"),Y=n.n(Z),ee=n("Dd8w"),te=n.n(ee),ne=n("aFK5"),re=n.n(ne),oe=n("fZjL"),ie=n.n(oe),se={components:{buttonprint:R},props:{jsonData:{type:Array,required:!0},csvTitle:{type:[String,Number],default:"csv",required:!1},showLabels:{type:Boolean,default:!0,required:!1},labels:{type:Object,required:!1},icon:{type:String,required:!1}},data:function(){return{csvLabels:null,csvData:null}},destroyed:function(){this.csvLabels=null,this.csvData=null},methods:{handleClick:function(){var e=ie()(this._events).indexOf("error")>-1,t=ie()(this._events).indexOf("success")>-1;if(this.jsonData.length)if(!this.labels||ie()(this.labels).length){var n=re()(te()({},this.jsonData[0])),r=this.labels||this.$_createCsvLabelsConf(n);if(this.csvLabels=this.showLabels?this.$_createCsvLabels(r):"",this.csvData=this.$_createCsvContent(this.jsonData,r),"error"!==this.csvLabels&&"error"!==this.csvData){var o=this.csvLabels+this.csvData,i=this.$_downloadCsv("csv-"+this._uid,o,this.csvTitle);i||this.handleError("An error has occured",e),i&&t&&this.$emit("success",!0)}else this.handleError("Error: An error occured while parsing the data.",e)}else this.handleError("Error: Labels are empty",e);else this.handleError("Error: Data are empty",e)},handleError:function(e,t){throw e},$_createCsvLabelsConf:function(e){var t={};return e.map(function(e,n){t[e]={title:e}}),t},$_createCsvLabels:function(e){var t="",n="";try{ie()(e).map(function(n,r){t+='"'+e[n].title+'",'}),n+=(t=t.slice(0,-1))+"\r\n"}catch(e){n="error"}finally{return n}},$_createCsvContent:function(e,t){var n="",r="",o="",i=new Array;e.forEach(function(e){e&&i.push(e)});try{i.map(function(e,i){n="",ie()(t).map(function(t,r){o=Y()(e[t]),n+="number"===o||"float"===o?e[t]+",":'"'+e[t]+'",'}),n=n.slice(0,-1),r+=n+"\r\n"})}catch(e){r="error"}finally{return r}},$_downloadCsv:function(e,t,n){try{var r="data:text/csv;charset=utf-8,"+encodeURI(t),o=document.createElement("a");return o.id="csv-"+e,o.href=r,document.body.appendChild(o),document.getElementById(o.id).style.visibility="hidden",document.getElementById(o.id).download=n+".csv",document.body.appendChild(o),document.getElementById(o.id).click(),setTimeout(function(){document.body.removeChild(o)}),!0}catch(e){return!1}}}},ae={render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",{attrs:{id:"json-to-csv-"+this._uid},on:{click:this.handleClick}},[t("buttonprint",{attrs:{iconName:this.icon}})],1)},staticRenderFns:[]},ce={components:{JsonToCsv:n("VU/8")(se,ae,!1,null,null,null).exports},data:function(){return{iconName:"database",data:[]}},mounted:function(){this.getData()},methods:{getData:function(){console.log("vue component trigggering loadDataForExport");var e=M.function_createQueryPreForExport(this.$store.state.filters.currentDepartment),t=M.function_createQueryGeoForExport(this.$store.state.filters.currentDepartment),n=M.search("pre",e),r=M.search("geo",t),o=this;O.a.all([n,r].map(function(e){return e.catch(function(e){return e})})).then(function(e){var t=e[0].hits.hits,n=e[1].hits.hits,r=t.map(function(e){try{var t=n.find(function(t){return e._source.geo_id===t._source.properties.code})._source;return e._source.nom=t.properties.nom,e._source.maille_geographique=t.geotype,e._source}catch(e){console.log("pb avec le mapping geo_id = code dans l export de data",e.toString().slice(0,100))}});o.data=r}).catch(function(e){return console.log("error is ",e)})}}},ue={render:function(){var e=this.$createElement;return(this._self._c||e)("JsonToCsv",{attrs:{id:"ButtonExport","json-data":this.data,"csv-title":"previsecours_predictions",icon:this.iconName}})},staticRenderFns:[]};var le={components:{buttonprint:R},data:function(){return{iconName:"building"}},methods:{clickEvent:function(){this.$store.commit("toogleCasernes")}},mounted:function(){this.$store.dispatch("loadCasernes")}},de={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"ButtonCasernes"},on:{click:this.clickEvent}},[t("buttonprint",{attrs:{iconName:this.iconName}})],1)},staticRenderFns:[]};var pe={components:{Carte:a,Filters:C,Slider:S,ButtonPrint:T,ButtonExport:n("VU/8")(ce,ue,!1,function(e){n("kCKg")},null,null).exports,ButtonCasernes:n("VU/8")(le,de,!1,function(e){n("3YjR")},"data-v-4a148632",null).exports}},ge={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"refForScreenshot",staticStyle:{width:"100%",height:"100%",margin:"0px"}},[t("Carte"),this._v(" "),t("Filters"),this._v(" "),t("Slider"),this._v(" "),t("ButtonPrint"),this._v(" "),t("ButtonExport"),this._v(" "),t("ButtonCasernes")],1)},staticRenderFns:[]},fe=n("VU/8")(pe,ge,!1,null,null,null).exports,he=n("NYxO");r.a.use(he.a);var me=new he.a.Store({state:{filters:{hideAllFilters:!1,currentCategorInter:"suap",currentTimeAggregation:"s",currentGeoAggregation:"com",currentDepartment:91,showCasernes:!0},carte:{zoom:10},data:{geo:{},int:{},pre:{},cas:{}},dataHasBeenUpdated:0,slider:{begin:"",currentPosition:1},configuration:{categorInters:[{name:"SUAP",nameCode:"suap",description:"Secours a personne",position:1,show:!0,available:!0},{name:"Accident",nameCode:"acci",description:"Accident de la route",position:2,show:!0,available:!0},{name:"Incendie Urb",nameCode:"incu",description:"Incendie en milieu urbain",position:3,show:!0,available:!0},{name:"Incendie Nat",nameCode:"incn",description:"Incendie en milieu naturel",position:4,show:!0,available:!0},{name:"Incendie & Accident",nameCode:"coia",description:"Incendie (naturel et urbain) et accident",position:5,show:!0,available:!1}],timeAggregations:[{name:"jour",nameCode:"j",description:"aggregation par jours",timeRepetition:5,timeStepBetweenRepetitions:{type:"days",step:1},position:1,show:!0,available:!1},{name:"semaine",nameCode:"s",description:"aggregation par semaines",timeRepetition:36,timeStepBetweenRepetitions:{type:"days",step:7},position:2,show:!0,available:!0},{name:"mois",nameCode:"m",description:"aggregation par mois",timeRepetition:12,timeStepBetweenRepetitions:{type:"months",step:1},position:3,show:!0,available:!1},{name:"trimestre",nameCode:"t",description:"aggregation par trimestres",timeRepetition:4,timeStepBetweenRepetitions:{type:"months",step:3},position:4,show:!0,available:!1},{name:"an",nameCode:"a",description:"aggregation par ans",timeRepetition:3,timeStepBetweenRepetitions:{type:"months",step:12},position:5,show:!0,available:!1}],geoAggregations:[{name:"departement",nameCode:"dpt",description:"aggregation par departement",position:1,show:!0,available:!1},{name:"zone de couverture",nameCode:"zdc",description:"aggregation par zone de couverture",position:2,show:!0,available:!0},{name:"commune",nameCode:"com",description:"aggregation par commune",position:3,show:!0,available:!0}]}},getters:{slider_timeAggregationConfiguration:function(e){return function(t){var n=void 0;try{if(!(n=e.configuration.timeAggregations.find(function(e){return e.nameCode===t})))throw"timeAggregation not defined for: "+t}catch(e){return void console.log("error",e)}return n}}},mutations:{filters_updateCategory:function(e,t){e.filters.currentCategorInter=t},filters_updateGeoAggregation:function(e,t){e.filters.currentGeoAggregation=t},filters_updateTimeAggregation:function(e,t){e.filters.currentTimeAggregation=t},reloadData:function(e,t){console.log("result newData.elasticsearchResult",t.elasticsearchResult),e.data[t.dataSubset]=t.elasticsearchResult,e.dataHasBeenUpdated+=1},slider_updateDateBegin:function(e,t){e.slider.begin=t},slider_updateCurrentPosition:function(e,t){e.slider.currentPosition=t},toogleCasernes:function(e){e.filters.showCasernes=!e.filters.showCasernes}},actions:{filters_updateCategory:function(e,t){e.commit("filters_updateCategory",t),e.dispatch("reloadData",["pre"])},filters_updateGeoAggregation:function(e,t){e.commit("filters_updateGeoAggregation",t),e.dispatch("reloadData",["geo"])},filters_updateTimeAggregation:function(e,t){return new O.a(function(n,r){e.commit("filters_updateTimeAggregation",t),e.dispatch("reloadData",["pre"]).then(function(){try{var t=e.state.data.pre.hits.hits[0]._source.pre_001_is;e.commit("slider_updateDateBegin",t),n()}catch(e){console.log("problem with state.data.pre.hits.hits[0]._source.pre_001_is -> ",e)}})})},getNewData:function(e,t){var n=M.function_createQuery(e.state,t);return console.log(n,t),M.search(t,n)},reloadData:function(e,t){return new O.a(function(n,r){Array.isArray(t)?t.forEach(function(r,o){"string"==typeof r&&"string"==typeof V.a.indexes[r]?e.dispatch("getNewData",r).then(function(i){var s={dataSubset:r,elasticsearchResult:i};e.commit("reloadData",s),o===t.length-1&&n()}):console.log("dataSubset: ",r," needs to be part of the configuration json, like int or geo")}):console.log("dataSubsets needs to be an array of string")})},loadCasernes:function(e){return console.log("on est dans toogleCasernes"),new O.a(function(t,n){var r=M.function_createQueryLoadCasernes(e.state.filters.currentDepartment);M.search("geo",r).then(function(n){var r={dataSubset:"cas",elasticsearchResult:n};e.commit("reloadData",r),t()})})}}}),ve=n("/ocq");r.a.use(ve.a);var je=new ve.a({routes:[{path:"/",name:"Home"}]}),ye=n("QxPg"),be=n("1P+R"),_e=n("mZf6"),Ce=n.n(_e),we=n("U0v6"),Ae=n("2xhc");r.a.config.productionTip=!1,ye.a.library.add(be.a,Ce.a),r.a.component("font-awesome-icon",we.FontAwesomeIcon),r.a.use(Ae.a),new r.a({store:me,router:je,el:"#previsecoursMainApp",components:{App:fe},template:"<App/>"})},RmuI:function(e,t){},VglX:function(e,t){},W3x2:function(e,t){},Z9cN:function(e,t){},aFj1:function(e,t){},e8iV:function(e,t){},hP9e:function(e,t){},jVs4:function(e,t){},kCKg:function(e,t){},pW2n:function(e,t){e.exports={version:.1}},rBQb:function(e,t){},uslO:function(e,t,n){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function o(e){return n(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.3fe4d9761d0cfb1fb93b.js.map